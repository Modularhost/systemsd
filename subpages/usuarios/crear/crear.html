<!-- subpages/usuarios/crear/crear.html -->
<div class="user-create-form">
  <h2>Crear Nuevo Usuario</h2>
  <form id="userForm">
    <div class="form-group">
      <label for="fullName">Nombre Completo:</label>
      <input type="text" id="fullName" required>
    </div>
    <div class="form-group">
      <label for="username">Nombre de Usuario:</label>
      <input type="text" id="username" required>
    </div>
    <div class="form-group">
      <label for="rut">RUT:</label>
      <input type="text" id="rut" required>
    </div>
    <div class="form-group">
      <label for="dob">Fecha de Nacimiento:</label>
      <input type="date" id="dob" required>
    </div>
    <div class="form-group">
      <label for="email">Correo Electrónico:</label>
      <input type="email" id="email" required>
    </div>
    <div class="form-group">
      <label for="sex">Sexo:</label>
      <select id="sex" required>
        <option value="">Seleccione</option>
        <option value="masculino">Masculino</option>
        <option value="femenino">Femenino</option>
        <option value="otro">Otro</option>
      </select>
    </div>
    <div class="form-group">
      <label for="role">Rol:</label>
      <select id="role" required onchange="loadDefaultPermissions()">
        <option value="">Seleccione</option>
        <option value="administrador">Administrador</option>
        <option value="operador">Operador</option>
        <option value="gestor">Gestor</option>
      </select>
    </div>
    
    <div class="permissions-section">
      <h3>Permisos Detallados</h3>
      <p>Seleccione los permisos para menús, submenús y elementos específicos. Los permisos por defecto se cargan según el rol, pero puede personalizarlos.</p>
      
      <!-- Árbol de permisos -->
      <div class="permissions-tree">
        <!-- Implantes -->
        <div class="permission-group">
          <label>
            <input type="checkbox" class="menu-checkbox" data-menu="implantes" onchange="toggleSubmenus(this)">
            Implantes (Menú Principal)
          </label>
          <div class="subpermissions" style="display: none; margin-left: 20px;">
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-ingresos" onchange="toggleElements(this)">
              Ingresos
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <!-- Elementos específicos de Ingresos, si aplican -->
              <label><input type="checkbox" data-element="implantes-ingresos-formulario"> Formulario</label><br>
              <label><input type="checkbox" data-element="implantes-ingresos-tabla"> Tabla</label><br>
              <label><input type="checkbox" data-element="implantes-ingresos-registrar"> Botón Registrar</label><br>
              <label><input type="checkbox" data-element="implantes-ingresos-limpiar"> Botón Limpiar</label><br>
              <label><input type="checkbox" data-element="implantes-ingresos-descargar"> Botón Descargar</label><br>
              <label><input type="checkbox" data-element="implantes-ingresos-importar"> Botón Importar</label>
            </div>
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-cargar" onchange="toggleElements(this)">
              Cargar
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <label><input type="checkbox" data-element="implantes-cargar-formulario"> Formulario</label><br>
              <label><input type="checkbox" data-element="implantes-cargar-tabla"> Tabla</label><br>
              <label><input type="checkbox" data-element="implantes-cargar-registrar"> Botón Registrar</label><br>
              <label><input type="checkbox" data-element="implantes-cargar-limpiar"> Botón Limpiar</label><br>
              <label><input type="checkbox" data-element="implantes-cargar-descargar"> Botón Descargar</label><br>
              <label><input type="checkbox" data-element="implantes-cargar-importar"> Botón Importar</label>
            </div>
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-pacientes" onchange="toggleElements(this)">
              Pacientes
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <!-- Agrega elementos específicos si los hay -->
            </div>
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-referencias" onchange="toggleElements(this)">
              Referencias
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <!-- Agrega elementos específicos si los hay -->
            </div>
          </div>
        </div>
        
        <!-- Laboratorio -->
        <div class="permission-group">
          <label>
            <input type="checkbox" class="menu-checkbox" data-menu="laboratorio" onchange="toggleSubmenus(this)">
            Laboratorio (Menú Principal)
          </label>
          <div class="subpermissions" style="display: none; margin-left: 20px;">
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="laboratorio-analisis" onchange="toggleElements(this)">
              Análisis
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <!-- Elementos específicos de Análisis -->
              <label><input type="checkbox" data-element="laboratorio-analisis-formulario"> Formulario</label><br>
              <label><input type="checkbox" data-element="laboratorio-analisis-tabla"> Tabla</label><br>
              <!-- Agrega más según necesites -->
            </div>
            <label>
              <input type="checkbox" class="submenu-checkbox" data-submenu="laboratorio-resultados" onchange="toggleElements(this)">
              Resultados
            </label>
            <div class="elements" style="display: none; margin-left: 40px;">
              <!-- Elementos específicos -->
            </div>
          </div>
        </div>
        
        <!-- Agrega más grupos para otros menús como Consignación, Histórico, etc., siguiendo el mismo patrón -->
        <!-- Por brevedad, no los incluyo todos, pero puedes replicar la estructura para cada menú en submenus -->
        
      </div>
    </div>
    
    <button type="submit">Crear Usuario</button>
  </form>
</div>