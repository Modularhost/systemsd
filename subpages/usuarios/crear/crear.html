<!-- subpages/usuarios/crear/crear.html -->
<div class="user-create-form">
  <h2>Crear Nuevo Usuario</h2>
  <form id="userForm">
    <div class="form-group">
      <label for="fullName">Nombre Completo:</label>
      <input type="text" id="fullName" required>
    </div>
    <div class="form-group">
      <label for="username">Nombre de Usuario:</label>
      <input type="text" id="username" required>
    </div>
    <div class="form-group">
      <label for="rut">RUT:</label>
      <input type="text" id="rut" required>
    </div>
    <div class="form-group">
      <label for="dob">Fecha de Nacimiento:</label>
      <input type="date" id="dob" required>
    </div>
    <div class="form-group">
      <label for="email">Correo Electrónico:</label>
      <input type="email" id="email" required>
    </div>
    <div class="form-group">
      <label for="sex">Sexo:</label>
      <select id="sex" required>
        <option value="">Seleccione</option>
        <option value="masculino">Masculino</option>
        <option value="femenino">Femenino</option>
        <option value="otro">Otro</option>
      </select>
    </div>
    <div class="form-group">
      <label for="role">Rol:</label>
      <select id="role" required onchange="loadDefaultPermissions()">
        <option value="">Seleccione</option>
        <option value="administrador">Administrador</option>
        <option value="operador">Operador</option>
        <option value="gestor">Gestor</option>
      </select>
    </div>
    
    <div class="permissions-section">
      <h3>Permisos Detallados (Árbol Jerárquico)</h3>
      <p>Seleccione permisos de manera granular. Al marcar un menú principal, se muestran submenús. Al marcar un submenú, se muestran contenedores (e.g., formulario, tabla) y sus elementos internos (campos, columnas, botones, etc.). Los permisos por defecto se cargan según el rol, pero puede personalizarlos.</p>
      
      <!-- Árbol de permisos -->
      <div class="permissions-tree">
        <!-- Implantes -->
        <div class="permission-group">
          <label>
            <input type="checkbox" class="menu-checkbox" data-menu="implantes" onchange="toggleSubmenus(this)">
            Implantes (Menú Principal)
          </label>
          <div class="subpermissions" style="display: none; margin-left: 20px;">
            <!-- Submenú: Ingresos -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-ingresos" onchange="toggleContainers(this)">
                Ingresos
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Contenedor: Formulario -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="implantes-ingresos-formulario" onchange="toggleElements(this)">
                    Formulario
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <!-- Campos del formulario -->
                    <label><input type="checkbox" data-element="implantes-ingresos-formulario-campo-nombre"> Campo Nombre</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-formulario-campo-rut"> Campo RUT</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-formulario-campo-fecha"> Campo Fecha</label><br>
                    <!-- Botones del formulario -->
                    <label><input type="checkbox" data-element="implantes-ingresos-formulario-boton-registrar"> Botón Registrar</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-formulario-boton-limpiar"> Botón Limpiar</label>
                  </div>
                </div>
                <!-- Contenedor: Tabla -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="implantes-ingresos-tabla" onchange="toggleElements(this)">
                    Tabla
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <!-- Columnas de la tabla -->
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-columna-id"> Columna ID</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-columna-nombre"> Columna Nombre</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-columna-rut"> Columna RUT</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-columna-fecha"> Columna Fecha</label><br>
                    <!-- Otros elementos -->
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-paginacion"> Paginación</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-boton-descargar"> Botón Descargar</label><br>
                    <label><input type="checkbox" data-element="implantes-ingresos-tabla-boton-importar"> Botón Importar</label>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Submenú: Cargar -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-cargar" onchange="toggleContainers(this)">
                Cargar
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Contenedor: Formulario -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="implantes-cargar-formulario" onchange="toggleElements(this)">
                    Formulario
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <label><input type="checkbox" data-element="implantes-cargar-formulario-campo-archivo"> Campo Archivo</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-formulario-campo-descripcion"> Campo Descripción</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-formulario-boton-subir"> Botón Subir</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-formulario-boton-limpiar"> Botón Limpiar</label>
                  </div>
                </div>
                <!-- Contenedor: Tabla -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="implantes-cargar-tabla" onchange="toggleElements(this)">
                    Tabla
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-columna-id"> Columna ID</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-columna-archivo"> Columna Archivo</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-columna-fecha"> Columna Fecha</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-paginacion"> Paginación</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-boton-descargar"> Botón Descargar</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-boton-importar"> Botón Importar</label><br>
                    <label><input type="checkbox" data-element="implantes-cargar-tabla-boton-editar"> Botón Editar</label>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Submenú: Pacientes -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-pacientes" onchange="toggleContainers(this)">
                Pacientes
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Agrega contenedores similares: formulario con campos (nombre, rut, etc.), tabla con columnas (id, nombre, historial), botones, etc. -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="implantes-pacientes-formulario" onchange="toggleElements(this)">
                    Formulario
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <label><input type="checkbox" data-element="implantes-pacientes-formulario-campo-nombre"> Campo Nombre</label><br>
                    <!-- Más campos... -->
                  </div>
                </div>
                <!-- Tabla y otros... -->
              </div>
            </div>
            
            <!-- Submenú: Referencias -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="implantes-referencias" onchange="toggleContainers(this)">
                Referencias
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Similar estructura -->
              </div>
            </div>
          </div>
        </div>
        
        <!-- Laboratorio -->
        <div class="permission-group">
          <label>
            <input type="checkbox" class="menu-checkbox" data-menu="laboratorio" onchange="toggleSubmenus(this)">
            Laboratorio (Menú Principal)
          </label>
          <div class="subpermissions" style="display: none; margin-left: 20px;">
            <!-- Submenú: Análisis -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="laboratorio-analisis" onchange="toggleContainers(this)">
                Análisis
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Contenedor: Formulario -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="laboratorio-analisis-formulario" onchange="toggleElements(this)">
                    Formulario
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <label><input type="checkbox" data-element="laboratorio-analisis-formulario-campo-muestra"> Campo Muestra</label><br>
                    <label><input type="checkbox" data-element="laboratorio-analisis-formulario-campo-tipo"> Campo Tipo</label><br>
                    <label><input type="checkbox" data-element="laboratorio-analisis-formulario-boton-analizar"> Botón Analizar</label>
                  </div>
                </div>
                <!-- Contenedor: Tabla -->
                <div class="container-group">
                  <label>
                    <input type="checkbox" class="container-checkbox" data-container="laboratorio-analisis-tabla" onchange="toggleElements(this)">
                    Tabla
                  </label>
                  <div class="elements" style="display: none; margin-left: 60px;">
                    <label><input type="checkbox" data-element="laboratorio-analisis-tabla-columna-id"> Columna ID</label><br>
                    <label><input type="checkbox" data-element="laboratorio-analisis-tabla-columna-resultado"> Columna Resultado</label><br>
                    <label><input type="checkbox" data-element="laboratorio-analisis-tabla-paginacion"> Paginación</label><br>
                    <label><input type="checkbox" data-element="laboratorio-analisis-tabla-boton-exportar"> Botón Exportar</label>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Submenú: Resultados -->
            <div class="submenu-group">
              <label>
                <input type="checkbox" class="submenu-checkbox" data-submenu="laboratorio-resultados" onchange="toggleContainers(this)">
                Resultados
              </label>
              <div class="containers" style="display: none; margin-left: 40px;">
                <!-- Estructura similar -->
              </div>
            </div>
          </div>
        </div>
        
        <!-- Agrega más permission-group para otros menús principales como Consignación, Histórico, etc. 
        Replica la estructura: submenu-group > containers > container-group > elements.
        Para brevedad, no incluyo todos, pero en producción, agrega uno por menú de submenus en menu.js -->
        
      </div>
    </div>
    
    <button type="submit">Crear Usuario</button>
  </form>
</div>